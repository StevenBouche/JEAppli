{"version":3,"sources":["views/Pages/Login/Login.js","service/utils/cryptoUtils.js","service/request/index.js","service/key.js","service/auth/index.js"],"names":["Login","state","values","email","password","touched","errors","isValid","isLoading","submitError","showSignInError","handleFieldChange","field","value","newState","Object","_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__","_this","setState","validateForm","handleSignIn","_callee","history","loginResult","_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","wrap","_context","prev","next","props","AuthManager","login","isLogin","localStorage","setItem","push","t0","serviceError","stop","_this2","this","react__WEBPACK_IMPORTED_MODULE_8___default","createElement","className","reactstrap__WEBPACK_IMPORTED_MODULE_10__","reactstrap__WEBPACK_IMPORTED_MODULE_11__","reactstrap__WEBPACK_IMPORTED_MODULE_12__","md","reactstrap__WEBPACK_IMPORTED_MODULE_13__","reactstrap__WEBPACK_IMPORTED_MODULE_14__","reactstrap__WEBPACK_IMPORTED_MODULE_15__","reactstrap__WEBPACK_IMPORTED_MODULE_16__","reactstrap__WEBPACK_IMPORTED_MODULE_17__","reactstrap__WEBPACK_IMPORTED_MODULE_18__","addonType","reactstrap__WEBPACK_IMPORTED_MODULE_19__","reactstrap__WEBPACK_IMPORTED_MODULE_20__","onChange","event","target","type","placeholder","autoComplete","xs","reactstrap__WEBPACK_IMPORTED_MODULE_21__","onClick","color","style","width","react_router_dom__WEBPACK_IMPORTED_MODULE_9__","to","active","tabIndex","Component","withRouter","Buffer","crypto__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","crypto__WEBPACK_IMPORTED_MODULE_0___default","n","_key__WEBPACK_IMPORTED_MODULE_1__","cryptoUtils","key","text","iv","crypto","randomBytes","salt","keym","pbkdf2Sync","cipher","createCipheriv","encrypted","update","concat","final","toString","textParts","split","from","shift","encryptedText","join","decipher","createDecipheriv","decrypted","baseURL","RequestManager","getHeader","Accept","Content-Type","Authorization","encToken","Cookies","get","crypt","decrypt","getCookiesToken","_ref","_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","mark","ressource","object","request","res","method","headers","fetch","sent","ok","Error","json","abrupt","_x","_x2","apply","arguments","post","_ref2","_callee2","_context2","body","JSON","stringify","_x3","_x4","put","_ref3","_callee3","_context3","_x5","_x6","delete","axios","then","catch","error","setCookiesToken","token","encrypt","set","path","user","logout","remove","register","username","name"],"mappings":"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","file":"static/js/17.03d525de.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Button, Card, CardBody, CardGroup, Col, Container, Form, Input, InputGroup, InputGroupAddon, InputGroupText, Row } from 'reactstrap';\n\nimport AuthManager from '../../../service/auth'\nimport {withRouter} from 'react-router-dom';\n\nclass Login extends Component {\n\n  state = {\n    values: {\n      email: '',\n      password: ''\n    },\n    touched: {\n      email: false,\n      password: false\n    },\n    errors: {\n      email: null,\n      password: null\n    },\n    isValid: false,\n    isLoading: false,\n    submitError: null,\n    showSignInError: null\n  };\n\n  handleFieldChange = (field, value) => {\n    const newState = {...this.state};\n\n    newState.submitError = null;\n    newState.touched[field] = true;\n    newState.values[field] = value;\n\n    this.setState(newState, this.validateForm);\n  };\n\n  handleSignIn = async () => {\n    try {\n      const {history} = this.props;\n      const {values} = this.state;\n\n      this.setState({isLoading: true});\n      this.setState({showSignInError: false});\n\n      await AuthManager.login(values.email,values.password);\n      \n      let loginResult = AuthManager.isLogin();\n\n      this.setState({isLoading: false});\n      if (loginResult) {\n        localStorage.setItem('isAuthenticated', true);\n        history.push('/');\n        this.setState({showSignInError: false});\n      } else {\n        localStorage.setItem('isAuthenticated', false);\n        this.setState({showSignInError: true});\n      }\n    } catch (error) {\n      this.setState({\n        isLoading: false,\n        serviceError: error\n      });\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"app flex-row align-items-center\">\n        <Container>\n          <Row className=\"justify-content-center\">\n            <Col md=\"8\">\n              <CardGroup>\n                <Card className=\"p-4\">\n                  <CardBody>\n                    <Form>\n                      <h1>Login</h1>\n                      <p className=\"text-muted\">Sign In to your account</p>\n                      <InputGroup className=\"mb-3\">\n                        <InputGroupAddon addonType=\"prepend\">\n                          <InputGroupText>\n                            <i className=\"icon-user\"></i>\n                          </InputGroupText>\n                        </InputGroupAddon>\n                        <Input onChange={event => this.handleFieldChange('email', event.target.value)} type=\"text\" placeholder=\"Email\" autoComplete=\"email\" />\n                      </InputGroup>\n                      <InputGroup className=\"mb-4\">\n                        <InputGroupAddon addonType=\"prepend\">\n                          <InputGroupText>\n                            <i className=\"icon-lock\"></i>\n                          </InputGroupText>\n                        </InputGroupAddon>\n                        <Input onChange={event => this.handleFieldChange('password', event.target.value)} type=\"password\" placeholder=\"Password\" autoComplete=\"current-password\" />\n                      </InputGroup>\n                      <Row>\n                        <Col xs=\"6\">\n                          <Button  onClick={this.handleSignIn} color=\"primary\" className=\"px-4\">\n                              Login\n                          </Button>\n                        </Col>\n                        <Col xs=\"6\" className=\"text-right\">\n                          <Button color=\"link\" className=\"px-0\">Forgot password?</Button>\n                        </Col>\n                      </Row>\n                    </Form>\n                  </CardBody>\n                </Card>\n                <Card className=\"text-white bg-primary py-5 d-md-down-none\" style={{ width: '44%' }}>\n                  <CardBody className=\"text-center\">\n                    <div>\n                      <h2>Sign up</h2>\n                      <Link to=\"/register\">\n                        <Button color=\"primary\" className=\"mt-3\" active tabIndex={-1}>Register Now!</Button>\n                      </Link>\n                    </div>\n                  </CardBody>\n                </Card>\n              </CardGroup>\n            </Col>\n          </Row>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Login);\n","import crypto from 'crypto';\nimport key from '../key'\n\nvar cryptoUtils = {};\n\ncryptoUtils.encrypt = (key, text) => {\n    let iv = crypto.randomBytes(16);\n    const salt = crypto.randomBytes(64);\n    const keym = crypto.pbkdf2Sync(key, salt, 2145, 32, 'sha512');\n    let cipher = crypto.createCipheriv('aes-256-cbc', keym, iv);\n    let encrypted = cipher.update(text);\n    encrypted = Buffer.concat([encrypted, cipher.final()]);\n    return iv.toString('hex') + ':' + salt.toString('hex') + \":\" + encrypted.toString('hex') ;\n}\n\ncryptoUtils.decrypt = (key, text) => {\n    var text2 = text.toString();\n    let textParts = text2.split(':');\n    let iv = Buffer.from(textParts.shift(), 'hex');\n    let salt = Buffer.from(textParts.shift(), 'hex');\n    const keym = crypto.pbkdf2Sync(key, salt, 2145, 32, 'sha512');\n    let encryptedText = Buffer.from(textParts.join(':'), 'hex');\n    let decipher = crypto.createDecipheriv('aes-256-cbc', keym, iv);\n    let decrypted = decipher.update(encryptedText);\n    decrypted = Buffer.concat([decrypted, decipher.final()]);\n    return decrypted.toString();\n}\n\ncryptoUtils.cryptWithKey = (text) => {\n    let iv = crypto.randomBytes(16);\n    const salt = crypto.randomBytes(64);\n    const keym = crypto.pbkdf2Sync(key, salt, 2145, 32, 'sha512');\n    let cipher = crypto.createCipheriv('aes-256-cbc', keym, iv);\n    let encrypted = cipher.update(text);\n    encrypted = Buffer.concat([encrypted, cipher.final()]);\n    return iv.toString('hex') + ':' + salt.toString('hex') + \":\" + encrypted.toString('hex') ;\n}\n\ncryptoUtils.decryptWithKey = (text) => {\n    var text2 = text.toString();\n    let textParts = text2.split(':');\n    let iv = Buffer.from(textParts.shift(), 'hex');\n    let salt = Buffer.from(textParts.shift(), 'hex');\n    const keym = crypto.pbkdf2Sync(key, salt, 2145, 32, 'sha512');\n    let encryptedText = Buffer.from(textParts.join(':'), 'hex');\n    let decipher = crypto.createDecipheriv('aes-256-cbc', keym, iv);\n    let decrypted = decipher.update(encryptedText);\n    decrypted = Buffer.concat([decrypted, decipher.final()]);\n    return decrypted.toString();\n}\n\nexport default cryptoUtils;","import axios from 'axios';\nimport Cookies from 'universal-cookie';\nimport crypt from '../utils/cryptoUtils';\n//todo link api\nlet baseURL = 'https://appJe.stevenbouche.com:8080/api';\nconst RequestManager = {};\n\nfunction getKey() {\n  //TODO\n  return '5v8y/B?E(H+MbQeThVmYq3t6w9z$C&F)';\n}\n\nfunction getCookiesToken(){\n  var cookies = new Cookies();\n  var encToken = cookies.get('jwt_token');\n  if(!encToken) return undefined;\n  return crypt.decrypt(getKey(),encToken);\n}\n\nfunction getHeader(){\n  var token = getCookiesToken();\n    return {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      \"Authorization\": \"Bearer \"+token,\n    };\n}\n\nRequestManager.get =  async (ressource,object) => {\n    var request = {};\n    request.method = 'GET';\n    request.headers = getHeader();\n    //request.body = JSON.stringify(object);\n    let res = await fetch(baseURL+''+ressource+\"\"+object,request);\n    if(!res.ok)throw new Error('request error'+res);\n    else return await res.json();\n};\n\nRequestManager.post = async (ressource,object) => {\n  var request = {};\n  request.method = 'POST';\n  request.headers = getHeader();\n  request.body = JSON.stringify(object);\n  let res = await fetch(baseURL+''+ressource, request);\n  if(!res.ok) throw new Error('request error'+res);\n  else return res;\n};\n\nRequestManager.put = async (ressource,object) => {\n  var request = {};\n  request.method = 'PUT';\n  request.headers = getHeader();\n  request.body = JSON.stringify(object);\n  let res = await fetch(baseURL+''+ressource, request);\n  if(!res.ok) throw new Error('request error'+res);\n  else return res;\n};\n\nRequestManager.delete = (ressource,object) => {\n  axios.delete(baseURL+''+ressource, object)\n    .then(res => { return res; })\n    .catch((error) => { return error; })\n};\n\nexport default RequestManager;\n\n","var key = '5v8y/B?E(H+MbQeThVmYq3t6w9z$C&F)';\n\nexport default key;","import request from '../request';\nimport Cookies from 'universal-cookie';\nimport crypt from '../utils/cryptoUtils';\n\nconst AuthManager = {};\n\nfunction getKey() {\n  //TODO\n  return '5v8y/B?E(H+MbQeThVmYq3t6w9z$C&F)';\n}\n\nfunction setCookiesToken(token){\n  var encToken = crypt.encrypt(getKey(), token);\n  var cookies = new Cookies();\n  cookies.set('jwt_token', encToken, {path: '/'});\n}\n\nfunction getCookiesToken(){\n  var cookies = new Cookies();\n  var encToken = cookies.get('jwt_token');\n  if(!encToken) return undefined;\n  return crypt.decrypt(getKey(),encToken);\n}\n\nAuthManager.isLogin = () => {\n  var token = getCookiesToken();\n  if(!token) return false;\n  else return true;\n};\n\nAuthManager.login = async (email, password ) => {\n  var user = {\n    'email' : email,\n    'password' : password\n  };\n  var res = await request.post('/user/login', user);\n  res = await res.json();\n  if(!res.token) throw new Error('Token null');\n  setCookiesToken(res.token);\n};\n\nAuthManager.logout = async () => {\n  var res = await request.post('/user/logout',{});\n  if(res.ok) {\n    var cookies = new Cookies();\n    cookies.remove('jwt_token', {path: '/'});\n  }\n};\n\nAuthManager.register = async (username, email, password) => {\n\n  var user = {\n    'name' : username,\n    'email' : email,\n    'password' : password\n  };\n\n  var res = await request.post('/user', user);\n  res = await res.json();\n  \n  if(!res.token) throw new Error('Token null');\n  setCookiesToken(res.token);\n};\n\nexport default AuthManager;\n"],"sourceRoot":""}