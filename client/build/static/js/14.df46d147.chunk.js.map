{"version":3,"sources":["route/AuthenticationRoutes.js","service/utils/cryptoUtils.js","service/request/index.js","service/key.js","service/auth/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"],"names":["ProtectedRoutes","_ref","Component","component","path","Object","_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","AuthManager","isLogin","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","react_router_dom__WEBPACK_IMPORTED_MODULE_3__","to","exact","render","props","Buffer","crypto__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","crypto__WEBPACK_IMPORTED_MODULE_0___default","n","_key__WEBPACK_IMPORTED_MODULE_1__","cryptoUtils","key","text","iv","crypto","randomBytes","salt","keym","pbkdf2Sync","cipher","createCipheriv","encrypted","update","concat","final","toString","textParts","split","from","shift","encryptedText","join","decipher","createDecipheriv","decrypted","baseURL","RequestManager","getHeader","Accept","Content-Type","Authorization","encToken","Cookies","get","crypt","decrypt","getCookiesToken","_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","ressource","object","request","res","wrap","_context","prev","next","method","headers","fetch","sent","ok","Error","json","abrupt","stop","_x","_x2","apply","this","arguments","post","_ref2","_callee2","_context2","body","JSON","stringify","_x3","_x4","put","_ref3","_callee3","_context3","_x5","_x6","delete","axios","then","catch","error","setCookiesToken","token","encrypt","set","login","email","password","user","logout","remove","register","username","name","_objectWithoutProperties","source","excluded","i","target","sourceKeys","keys","length","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","d","__webpack_exports__"],"mappings":"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","file":"static/js/14.df46d147.chunk.js","sourcesContent":["import React from 'react'\nimport AuthManager from '../service/auth'\nimport { Route, Redirect } from 'react-router-dom';\n\nconst ProtectedRoutes = ({component: Component, ...rest}) => {\n const {path} = rest;\n\n var b = AuthManager.isLogin();\n\nif(b){\n  return <Redirect to=\"/\" />\n}\n\nreturn (\n   <Route exact path={path} render={props => <Component {...props}/>} />\n )\n}\n\nexport default ProtectedRoutes;","import crypto from 'crypto';\nimport key from '../key'\n\nvar cryptoUtils = {};\n\ncryptoUtils.encrypt = (key, text) => {\n    let iv = crypto.randomBytes(16);\n    const salt = crypto.randomBytes(64);\n    const keym = crypto.pbkdf2Sync(key, salt, 2145, 32, 'sha512');\n    let cipher = crypto.createCipheriv('aes-256-cbc', keym, iv);\n    let encrypted = cipher.update(text);\n    encrypted = Buffer.concat([encrypted, cipher.final()]);\n    return iv.toString('hex') + ':' + salt.toString('hex') + \":\" + encrypted.toString('hex') ;\n}\n\ncryptoUtils.decrypt = (key, text) => {\n    var text2 = text.toString();\n    let textParts = text2.split(':');\n    let iv = Buffer.from(textParts.shift(), 'hex');\n    let salt = Buffer.from(textParts.shift(), 'hex');\n    const keym = crypto.pbkdf2Sync(key, salt, 2145, 32, 'sha512');\n    let encryptedText = Buffer.from(textParts.join(':'), 'hex');\n    let decipher = crypto.createDecipheriv('aes-256-cbc', keym, iv);\n    let decrypted = decipher.update(encryptedText);\n    decrypted = Buffer.concat([decrypted, decipher.final()]);\n    return decrypted.toString();\n}\n\ncryptoUtils.cryptWithKey = (text) => {\n    let iv = crypto.randomBytes(16);\n    const salt = crypto.randomBytes(64);\n    const keym = crypto.pbkdf2Sync(key, salt, 2145, 32, 'sha512');\n    let cipher = crypto.createCipheriv('aes-256-cbc', keym, iv);\n    let encrypted = cipher.update(text);\n    encrypted = Buffer.concat([encrypted, cipher.final()]);\n    return iv.toString('hex') + ':' + salt.toString('hex') + \":\" + encrypted.toString('hex') ;\n}\n\ncryptoUtils.decryptWithKey = (text) => {\n    var text2 = text.toString();\n    let textParts = text2.split(':');\n    let iv = Buffer.from(textParts.shift(), 'hex');\n    let salt = Buffer.from(textParts.shift(), 'hex');\n    const keym = crypto.pbkdf2Sync(key, salt, 2145, 32, 'sha512');\n    let encryptedText = Buffer.from(textParts.join(':'), 'hex');\n    let decipher = crypto.createDecipheriv('aes-256-cbc', keym, iv);\n    let decrypted = decipher.update(encryptedText);\n    decrypted = Buffer.concat([decrypted, decipher.final()]);\n    return decrypted.toString();\n}\n\nexport default cryptoUtils;","import axios from 'axios';\nimport Cookies from 'universal-cookie';\nimport crypt from '../utils/cryptoUtils';\n//todo link api\nlet baseURL = 'https://appJe.stevenbouche.com:8080/api';\nconst RequestManager = {};\n\nfunction getKey() {\n  //TODO\n  return '5v8y/B?E(H+MbQeThVmYq3t6w9z$C&F)';\n}\n\nfunction getCookiesToken(){\n  var cookies = new Cookies();\n  var encToken = cookies.get('jwt_token');\n  if(!encToken) return undefined;\n  return crypt.decrypt(getKey(),encToken);\n}\n\nfunction getHeader(){\n  var token = getCookiesToken();\n    return {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      \"Authorization\": \"Bearer \"+token,\n    };\n}\n\nRequestManager.get =  async (ressource,object) => {\n    var request = {};\n    request.method = 'GET';\n    request.headers = getHeader();\n    //request.body = JSON.stringify(object);\n    let res = await fetch(baseURL+''+ressource+\"\"+object,request);\n    if(!res.ok)throw new Error('request error'+res);\n    else return await res.json();\n};\n\nRequestManager.post = async (ressource,object) => {\n  var request = {};\n  request.method = 'POST';\n  request.headers = getHeader();\n  request.body = JSON.stringify(object);\n  let res = await fetch(baseURL+''+ressource, request);\n  if(!res.ok) throw new Error('request error'+res);\n  else return res;\n};\n\nRequestManager.put = async (ressource,object) => {\n  var request = {};\n  request.method = 'PUT';\n  request.headers = getHeader();\n  request.body = JSON.stringify(object);\n  let res = await fetch(baseURL+''+ressource, request);\n  if(!res.ok) throw new Error('request error'+res);\n  else return res;\n};\n\nRequestManager.delete = (ressource,object) => {\n  axios.delete(baseURL+''+ressource, object)\n    .then(res => { return res; })\n    .catch((error) => { return error; })\n};\n\nexport default RequestManager;\n\n","var key = '5v8y/B?E(H+MbQeThVmYq3t6w9z$C&F)';\n\nexport default key;","import request from '../request';\nimport Cookies from 'universal-cookie';\nimport crypt from '../utils/cryptoUtils';\n\nconst AuthManager = {};\n\nfunction getKey() {\n  //TODO\n  return '5v8y/B?E(H+MbQeThVmYq3t6w9z$C&F)';\n}\n\nfunction setCookiesToken(token){\n  var encToken = crypt.encrypt(getKey(), token);\n  var cookies = new Cookies();\n  cookies.set('jwt_token', encToken, {path: '/'});\n}\n\nfunction getCookiesToken(){\n  var cookies = new Cookies();\n  var encToken = cookies.get('jwt_token');\n  if(!encToken) return undefined;\n  return crypt.decrypt(getKey(),encToken);\n}\n\nAuthManager.isLogin = () => {\n  var token = getCookiesToken();\n  if(!token) return false;\n  else return true;\n};\n\nAuthManager.login = async (email, password ) => {\n  var user = {\n    'email' : email,\n    'password' : password\n  };\n  var res = await request.post('/user/login', user);\n  res = await res.json();\n  if(!res.token) throw new Error('Token null');\n  setCookiesToken(res.token);\n};\n\nAuthManager.logout = async () => {\n  var res = await request.post('/user/logout',{});\n  if(res.ok) {\n    var cookies = new Cookies();\n    cookies.remove('jwt_token', {path: '/'});\n  }\n};\n\nAuthManager.register = async (username, email, password) => {\n\n  var user = {\n    'name' : username,\n    'email' : email,\n    'password' : password\n  };\n\n  var res = await request.post('/user', user);\n  res = await res.json();\n  \n  if(!res.token) throw new Error('Token null');\n  setCookiesToken(res.token);\n};\n\nexport default AuthManager;\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}"],"sourceRoot":""}